@page "/airports"
@using NC_Flights.Shared
@inject HttpClient Http

<PageTitle>All Airports</PageTitle>



<MudContainer MaxWidth="MaxWidth.ExtraLarge" Style="background:#BDBDBD">
    <MudAlert Severity="Severity.Normal">This Page shows All Commerical Airlines. Clicking on an airport code returns all flights at that airport</MudAlert>
    <br />
    <br />
    <MudTable Items="@FlyData">
        <ToolBarContent>
            <MudText Typo="Typo.h6">North Carolina Airports</MudText>
        </ToolBarContent>
        <HeaderContent>
            <MudTh>Current Airports</MudTh>
        </HeaderContent>
        <RowTemplate>
            @if (context.AirportTo == "CLT" || context.AirportTo == "FAY" || context.AirportTo == "AVL" || context.AirportTo == "GSO"
            || context.AirportTo == "ILM" || context.AirportTo == "JQF" || context.AirportTo == "PGV" || context.AirportTo == "EWN"
            || context.AirportTo == "OAJ" || context.AirportTo == "RDU")
            {
                <MudTd><a href="airports/@context.AirportTo">@context.AirportTo</a></MudTd>
            }    
        </RowTemplate>
    </MudTable>
    <br />
    <br />
    <MudTable Items="@FlyData">
        <ToolBarContent>
            <MudText Typo="Typo.h6"> Other Airports</MudText>
        </ToolBarContent>
        <HeaderContent>
            <MudTh>Current Airports</MudTh>
        </HeaderContent>
        <RowTemplate>
            @if (context.AirportTo == "CLT" || context.AirportTo == "FAY" || context.AirportTo == "AVL" || context.AirportTo == "GSO"
            || context.AirportTo == "ILM" || context.AirportTo == "JQF" || context.AirportTo == "PGV" || context.AirportTo == "EWN"
            || context.AirportTo == "OAJ" || context.AirportTo == "RDU")
            {
            } else
            {
                <MudTd><a href="airports/@context.AirportTo">@context.AirportTo</a></MudTd>
            } 
        </RowTemplate>
    </MudTable>
    <br />
    <br />
</MudContainer>

@code {
    public List<AirlinesNc> FlyData { get; set; } = new List<AirlinesNc>();

    protected override async Task OnInitializedAsync()
    {
        var result = await Http.GetFromJsonAsync<List<AirlinesNc>>("flight/list");
        if (result is not null)
        {
            FlyData = result;
        }
    }
}



